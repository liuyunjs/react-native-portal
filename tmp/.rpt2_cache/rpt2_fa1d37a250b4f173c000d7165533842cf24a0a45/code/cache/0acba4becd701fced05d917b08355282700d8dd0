{"code":"/**\r\n * @Description : portal provider\r\n * @Create on : 2019/11/17 15:55\r\n * @author liuyunjs\r\n * @version 0.0.1\r\n **/\r\nimport * as React from 'react';\r\nimport { View, StyleSheet, DeviceEventEmitter } from 'react-native';\r\nimport { ADD_PORTAL, REMOVE_PORTAL } from './event-name';\r\nexport default class extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.addPortal = (event) => {\r\n            this.setState((prevState) => {\r\n                const list = prevState.portalList.filter((item) => item.key !== event.key);\r\n                list.push(event);\r\n                return {\r\n                    portalList: list,\r\n                };\r\n            });\r\n        };\r\n        this.removePortal = (key) => {\r\n            this.setState((prevState) => {\r\n                return {\r\n                    portalList: prevState.portalList.filter((item) => item.key !== key),\r\n                };\r\n            });\r\n        };\r\n        this.state = {\r\n            portalList: [],\r\n        };\r\n        this.bindEvents();\r\n    }\r\n    componentWillUnmount() {\r\n        this.bindEvents(true);\r\n    }\r\n    bindEvents(isRemove) {\r\n        const key = isRemove ? 'removeListener' : 'addListener';\r\n        DeviceEventEmitter[key](ADD_PORTAL, this.addPortal);\r\n        DeviceEventEmitter[key](REMOVE_PORTAL, this.removePortal);\r\n    }\r\n    render() {\r\n        return (React.createElement(React.Fragment, null,\r\n            this.props.children,\r\n            React.createElement(View, { style: StyleSheet.absoluteFillObject, pointerEvents: \"box-none\" }, this.state.portalList.map(item => {\r\n                return React.cloneElement(item.element, { key: item.key });\r\n            }))));\r\n    }\r\n}\r\n","references":["/Users/liuyunjs/Documents/projects/portal/node_modules/@types/react/index.d.ts","/Users/liuyunjs/Documents/projects/portal/node_modules/@types/react-native/index.d.ts","/Users/liuyunjs/Documents/projects/portal/src/portal/types.ts","/Users/liuyunjs/Documents/projects/portal/src/portal/event-name.ts"]}
