{"code":"/**\r\n * @Description : create portal component\r\n * @Create on : 2019/11/18 22:54\r\n * @author liuyunjs\r\n * @version 0.0.1\r\n **/\r\nimport { __assign, __extends } from \"tslib\";\r\nimport * as React from 'react';\r\nimport StaticAction from './static';\r\nexport default function portalHOC(Component) {\r\n    var staticAction = new StaticAction();\r\n    return /** @class */ (function (_super) {\r\n        __extends(Portal, _super);\r\n        function Portal() {\r\n            var _this = _super !== null && _super.apply(this, arguments) || this;\r\n            _this.child = React.createRef();\r\n            _this.close = function () { return _this.child.current && _this.child.current.close && _this.child.current.close(); };\r\n            _this.onChange = function (visible) {\r\n                if (!visible) {\r\n                    _this.key && staticAction.hide(_this.key);\r\n                    _this.key = undefined;\r\n                }\r\n                var onChange = _this.props.onChange;\r\n                onChange && onChange(visible);\r\n            };\r\n            return _this;\r\n        }\r\n        // static show(component: React.ReactNode): string {\r\n        //   return staticAction.show(\r\n        //     <Component>\r\n        //       {component}\r\n        //     </Component>,\r\n        //   );\r\n        // }\r\n        Portal.hide = function () {\r\n            staticAction.hide();\r\n        };\r\n        Portal.prototype.componentDidMount = function () {\r\n            if (this.props.visible) {\r\n                this.show();\r\n            }\r\n        };\r\n        Portal.prototype.componentDidUpdate = function (prevProps) {\r\n            if (prevProps.visible !== this.props.visible) {\r\n                if (this.props.visible) {\r\n                    return this.show();\r\n                }\r\n                this.close();\r\n            }\r\n        };\r\n        Portal.prototype.componentWillUnmount = function () {\r\n            this.key && staticAction.hide(this.key);\r\n        };\r\n        Portal.prototype.show = function () {\r\n            this.key = staticAction.show((React.createElement(Component, __assign({}, this.props, { ref: this.child, onChange: this.onChange }))));\r\n        };\r\n        Portal.prototype.render = function () {\r\n            return null;\r\n        };\r\n        return Portal;\r\n    }(React.PureComponent));\r\n}\r\n","references":["/Users/liuyunjs/Documents/projects/portal/node_modules/@types/react/index.d.ts","/Users/liuyunjs/Documents/projects/portal/node_modules/@types/react/index.d.ts","/Users/liuyunjs/Documents/projects/portal/src/portal/static.ts","/Users/liuyunjs/Documents/projects/portal/src/portal/types.ts"]}
